mixin productCard(item, horizontalScroll=true)
  a.relative.flex.shrink-0.flex-col.overflow-hidden.rounded-lg.bg-white.transform-gpu.drop-shadow-around-light(
    href='pages/market/product.html',
    class=horizontalScroll ? 'w-40' : 'w-full'
  )
    if item.newItem
      .absolute.rounded-br-lg.bg-lab-color.px-2.pt-1.text-xs.text-white(class='pb-1.5') Новинка
    img.mx-auto.size-40.object-cover(src=`dynamic-img/${item.image}` alt="Изображение товара")
    .flex.flex-grow.flex-col.items-center.gap-3.p-2
      .flex.items-center.gap-1
        img.size-3(src='img/star.svg' alt="Рейтинг")
        span.text-xs= item.rating
        img.ml-2.size-3(src='img/comment.svg' alt="Комментариев")
        span.text-xs= item.comments
        img.ml-2.size-3(src='img/player.svg' alt="Игроков пользуются")
        span.text-xs= item.players
      .line-clamp-3.flex-grow.text-center.text-sm.font-medium.leading-tight.text-lab-black= item.name
    .mt-auto.flex.w-full.items-center.justify-between.px-3.pb-3.pt-2
      span.text-xs.text-lab-black-50= item.shop
      .shrink-0.rounded.bg-lab-light-yellow.px-2.py-1.text-sm.font-semibold.text-lab-black= item.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ₽'
    .absolute.right-0.top-0
      div.flex.h-8.w-8.items-center.justify-center.rounded-full.bg-white.bg-opacity-50.cursor-pointer.toggle-heart-button(data-liked='false')
        img(src="img/heart-empty.svg" alt="Добавление в избранное").w-6.h-6
  script.
    document.addEventListener('DOMContentLoaded', function() {
        const heartButtons = document.querySelectorAll('.toggle-heart-button');

        heartButtons.forEach(button => {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                event.stopPropagation();

                const img = this.querySelector('img');
                const liked = this.getAttribute('data-liked') === 'true';

                if (liked) {
                    img.src = 'img/heart-empty.svg';
                    this.setAttribute('data-liked', 'false');
                } else {
                    img.src = 'img/heart-fill.svg';
                    this.setAttribute('data-liked', 'true');
                }
            });
        });
    });