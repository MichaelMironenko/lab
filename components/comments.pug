include /components/block.pug
include /components/atoms/avatar.pug
include /components/reactions.pug
include /components/atoms/userRating.pug
include /components/atoms/userStatusBadge.pug
include /components/comment.pug

mixin comments
    +block("3 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è", '','', false)
        .flex.gap-3.items-start.pb-3#comments
            div.mt-1
                +avatar('bg-lab-blue', '–ù–ü', '32')


            div.flex.flex-col.flex-grow.gap-3.relative
                textarea(id="commentTextArea" class="resize-none border rounded-md border-gray-300 p-2 transition-all duration-300 ease-in-out focus:outline-none focus:border-blue-500 overflow-hidden" style="scrollbar-width: none; -ms-overflow-style: none;" rows="1" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...")

                .flex.items-center.gap-4
                    img(src="img/paste.svg" id="pasteButton" alt="–í—Å—Ç–∞–≤–∏—Ç—å").size-6.hidden
                    +button('–û—Ç–º–µ–Ω–∞', 'text', 'lab-black-50', '', 'hidden w-1/2', 'cancelButton')
                    +button('–û—Ç–ø—Ä–∞–≤–∏—Ç—å', 'default', 'white', 'bg-lab-color', 'hidden w-1/2', 'commentSubmitButton')

            script.
                const textArea = document.getElementById('commentTextArea');
                const submitButton = document.getElementById('commentSubmitButton');
                const cancelButton = document.getElementById('cancelButton');
                const pasteButton = document.getElementById('pasteButton');

                textArea.addEventListener('focus', function() {
                    this.rows = 3;
                    this.style.overflow = 'hidden';
                    submitButton.classList.remove('hidden');
                    cancelButton.classList.remove('hidden');
                    pasteButton.classList.remove('hidden');
                    submitButton.disabled = true;
                });

                textArea.addEventListener('input', function() {
                    submitButton.disabled = this.value.trim().length <= 1;
                    this.style.height = '';
                    this.style.height = this.scrollHeight + 'px';
                    if(this.value.trim().length) {
                        submitButton.classList.remove('hidden');
                        cancelButton.classList.remove('hidden');
                        pasteButton.classList.remove('hidden');
                    } else {
                        submitButton.classList.add('hidden');
                        cancelButton.classList.add('hidden');
                        pasteButton.classList.add('hidden');
                    }
                });

                textArea.addEventListener('blur', function() {
                    if(!this.value.trim()) {
                        this.rows = 1;
                        this.style.height = 'auto';
                        this.style.overflow = 'hidden';
                        submitButton.classList.add('hidden');
                        cancelButton.classList.add('hidden');
                        pasteButton.classList.add('hidden');
                    }
                });


        +comment('1', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–µ–º—ë–Ω–æ–≤', 'asemenov', '', '–£ –º–µ–Ω—è —Å–ª–æ–º–∞–ª–∞—Å—å —Ä–∞–∫–µ—Ç–∫–∞, –∫—Ç–æ –º–æ–∂–µ—Ç –æ–¥–æ–ª–∂–∏—Ç—å –∑–∞–ø–∞—Å–Ω—É—é? üôèüèº', [
            { count: 3, emoji: 'üëç' },
            { count: 2, emoji: 'üëé' },
            { count: 1, emoji: 'üòÇ' },
            { count: 0, emoji: 'üëè' },
            { count: 0, emoji: 'üò≤' },
            { count: 0, emoji: 'üôèüèº' }
        ], 'bg-lab-green', 'dynamic-img/user-1.jpg')

        .pl-6.border-l.border-lab-black-10
            +comment('2', '–ù–∏–∫–∏—Ç–∞ –ü–æ–ª—è–Ω—Å–∫–∏–π', 'nikpol', '–ê–¥–º–∏–Ω', '–£ –º–µ–Ω—è –µ—Å—Ç—å, –Ω–æ –Ω–∞ –Ω–µ–π –Ω—É–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å —Å—Ç—Ä—É–Ω—ã', [
            { count: 2, emoji: 'üëè' },
            { count: 2, emoji: 'üëç' },
            { count: 1, emoji: 'üôèüèº' },
            { count: 0, emoji: 'üëé' },
            { count: 0, emoji: 'üòÇ' },
            { count: 0, emoji: 'üò≤' },

        ], 'bg-lab-blue')
        .pl-6.border-l.border-lab-black-10
            .pl-6.border-l.border-lab-black-10
                +comment('3', '', 'asemenov', '', '–ü–æ–¥—Ç—è–Ω—É—Ç—å –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, —Å–ø–∞—Å–∏–±–æ! –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å —Ç–æ–±–æ–π –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è?', [
            { count: 0, emoji: 'üëç' },
            { count: 0, emoji: 'üëé' },
            { count: 0, emoji: 'üòÇ' },
            { count: 0, emoji: 'üëè' },
            { count: 0, emoji: 'üò≤' },
            { count: 0, emoji: 'üôèüèº' }
        ], 'bg-lab-green', 'dynamic-img/user-1.jpg')